cdb-check
===

![test](https://github.com/baltth/cdb-check/actions/workflows/main.yml/badge.svg)

Tool to verify C/C++ build configuration by checking the
_[compile database](https://clang.llvm.org/docs/JSONCompilationDatabase.html)_,
i.e. `compile_commands.json` files generated by the build system.

This tool helps to verify the presence of specific compile options,
useful to ensure consistency of different build configurations.
Use it when a compile DB is available, e.g. when using
[CMake](https://cmake.org) or [LLVM](https://clang.llvm.org).

> To configure CMake to create a compile DB see
> [CMAKE_EXPORT_COMPILE_COMMANDS](https://cmake.org/cmake/help/latest/variable/CMAKE_EXPORT_COMPILE_COMMANDS.html)

# Installation, dependencies

This tool is intended to be a _simple utility script,_ I do not plan to create
a package nor to add an installer. Just download and use it.

Dependencies: _Python 3_ and nothing else. Tested on Ubuntu 24.04 with
a standard _Python 3.12.3_ installation

# Usage

See `./cdb-check-py -h`

# Features

- check if a user-defined compile option set is present in the CDB
- filter compile units to check, with support for simple wildcards
- remove specified path prefixes from the paths and and compile arguments
  (e.g. project path, build folder or sysroot) to make configuration easier
- configurable with config file and/or CLI arguments
  - CLI arguments are extending the configuration if present
    to create custom scenarios easily
- dump the loaded and filtered CDB for debugging

## Planned features:

- preset flag lists in configuration for different compilers
- preset flag lists in configuration for different libraries
  (determined by object file path, e.g. `CMakeFiles/target.dir` with _CMake_)
- maybe add a minimalistic support for makefiles

